<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="py-12 text-center" style="background-color: #E0E7FF;">
        <div class="w-16 h-16 bg-white/40 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <i class="fa-solid fa-code text-3xl" style="color: #6366F1;"></i>
        </div>
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Image to Base64 Converter</h1>
        <p class="text-gray-600">Convert your images to Base64 encoded strings for embedding in code</p>
    </div>

    <div class="container mx-auto px-4 max-w-5xl py-12">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <div class="p-8 md:p-12">
                <div class="border-3 border-dashed border-gray-200 rounded-2xl p-10 text-center transition-all duration-300 hover:border-indigo-400 hover:bg-indigo-50/50 cursor-pointer"
                    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)" (drop)="onDrop($event)"
                    (click)="fileInput.click()">
                    <input #fileInput type="file" multiple accept="image/*" class="hidden"
                        (change)="onFileSelected($event)">
                    <div class="flex flex-col items-center justify-center space-y-4">
                        <div
                            class="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-500 mb-2">
                            <i class="fa-solid fa-code text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Drag & Drop files here</h3>
                        <p class="text-gray-500">or <span class="text-indigo-500 font-semibold hover:underline">browse
                                files</span> from your computer</p>
                        <p class="text-xs text-gray-400 mt-2">Supports all image formats</p>
                    </div>
                </div>

                <!-- Options -->
                <div class="mt-6 flex items-center gap-4 bg-gray-50 p-4 rounded-xl">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" [(ngModel)]="includeDataUri" class="w-5 h-5 accent-indigo-500">
                        <span class="text-gray-700 font-medium">Include data URI prefix (data:image/...;base64,)</span>
                    </label>
                </div>

                @if (files.length > 0) {
                <div
                    class="mt-8 flex flex-col sm:flex-row justify-between items-center gap-4 bg-gray-50 p-4 rounded-xl border border-gray-100">
                    <div class="text-gray-600 font-medium">
                        <span class="text-gray-900 font-bold">{{ files.length }}</span> files selected
                    </div>
                    <div class="flex gap-3">
                        <button (click)="clearAll()"
                            class="px-5 py-2.5 rounded-lg text-red-500 font-medium hover:bg-red-50 transition-colors">Clear
                            All</button>
                        <button (click)="convertAll()" [disabled]="isConverting || allDone"
                            class="px-6 py-2.5 bg-indigo-600 text-white rounded-lg font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all">
                            {{ isConverting ? 'Converting...' : (allDone ? 'Converted!' : 'Convert to Base64') }}
                        </button>
                    </div>
                </div>
                }

                @if (isConverting) {
                <div class="mt-6">
                    <div class="flex justify-between text-sm font-medium text-gray-600 mb-2">
                        <span>Converting...</span><span>{{ progress }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 overflow-hidden">
                        <div class="bg-indigo-600 h-2.5 rounded-full transition-all duration-300"
                            [style.width.%]="progress"></div>
                    </div>
                </div>
                }

                @if (files.length > 0) {
                <div class="mt-10 space-y-4">
                    @for (file of files; track file.id) {
                    <div
                        class="bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden">
                        <div class="flex items-center gap-4 p-4">
                            <img [src]="file.previewUrl" class="w-16 h-16 object-cover rounded-lg" alt="preview">
                            <div class="flex-1 min-w-0">
                                <p class="font-medium text-gray-800 truncate">{{ file.name }}</p>
                                <p class="text-xs text-gray-400">{{ (file.file.size / 1024).toFixed(1) }} KB</p>
                            </div>
                            @if (file.status === 'converting') {
                            <i class="fa-solid fa-circle-notch fa-spin text-indigo-500 text-xl"></i>
                            } @else if (file.status === 'done') {
                            <div class="flex gap-2">
                                <button (click)="copyToClipboard(file)"
                                    class="px-4 py-2 bg-indigo-100 text-indigo-600 rounded-lg font-medium hover:bg-indigo-200 transition-colors flex items-center gap-2">
                                    <i class="fa-solid fa-copy"></i> Copy
                                </button>

                            </div>
                            }
                            <button (click)="removeFile(file.id)"
                                class="w-8 h-8 text-red-500 rounded-full flex items-center justify-center hover:bg-red-50 transition-colors"
                                title="Remove file">
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                        </div>
                        @if (file.status === 'done' && file.base64) {
                        <div class="px-4 pb-4">
                            <textarea readonly [value]="file.base64"
                                class="w-full h-24 bg-gray-50 border border-gray-200 rounded-lg p-3 text-xs font-mono text-gray-600 resize-none"></textarea>
                        </div>
                        }
                    </div>
                    }
                </div>
                }
            </div>
        </div>

        <!-- SEO Content -->
        <article class="prose lg:prose-xl mx-auto mt-16 px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Image to Base64 — Turn Any Image Into an Embeddable Code
                String</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                If you've ever built an HTML email and had recipients complain that "the images aren't showing," Base64
                is the answer. Instead of linking to an external image file that might get blocked, you encode the image
                data directly into your HTML as a text string. The result? The image is baked right into the code — no
                separate file needed, no broken image icons.
            </p>
            <p class="text-gray-600 mb-8 leading-relaxed">
                This tool converts any image (JPG, PNG, WebP, GIF, SVG, you name it) into a Base64 string you can paste
                directly into your HTML, CSS, or JavaScript. Upload your file, click encode, and copy the result.
                There's a toggle for including the data URI prefix — you'll want that on if you're embedding in an
                <code>img</code> tag or CSS <code>background-image</code>, and off if you're sending raw Base64 to an
                API.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">When Base64 Makes Sense (And When It Doesn't)</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                Base64 encoding increases the data size by roughly 33%, so it's not great for large photos. But for
                small assets — think icons, tiny logos, UI sprites, loading indicators — the tradeoff is worth it
                because you eliminate an HTTP request entirely. A page with 20 small images can shave off 20 network
                round-trips by inlining them, which measurably speeds up loading. It's also the go-to method for
                embedding images in single-file HTML apps, offline documentation, or JSON payloads sent to APIs.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">Email Templates: The Biggest Use Case</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                Most email clients block external images by default — Gmail, Outlook, Apple Mail all do it. If your
                email template links to images on your server, recipients get placeholder boxes until they click "load
                images." Base64-encoded images bypass this entirely because they're part of the email's HTML source. The
                tradeoff is a larger email size, so keep it to small images like logos and icons rather than full-width
                hero banners.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">Frequently Asked Questions</h2>
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Wait, so the image becomes text?</h3>
                    <p class="text-gray-600">Essentially, yes. Base64 takes the binary data of an image and represents
                        it as a long string of letters and numbers. Browsers know how to decode this back into a
                        viewable image. It looks like gibberish (a wall of characters), but it works perfectly when
                        dropped into HTML or CSS.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">How big can the images be?</h3>
                    <p class="text-gray-600">There's no hard limit, but as a practical guideline, keep Base64 images
                        under 10-20 KB (original size). Beyond that, the 33% size penalty starts outweighing the
                        benefits. For large images, it's better to serve them as regular files with proper caching.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">What's the data URI prefix thing?</h3>
                    <p class="text-gray-600">The prefix (like <code>data:image/png;base64,</code>) tells the browser
                        "hey, what follows is a Base64-encoded PNG image." You need this prefix if you're putting the
                        string in an <code>img src</code> or CSS <code>url()</code>. If you're sending the raw string to
                        a backend API, you usually leave it off.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Does this work with animated GIFs?</h3>
                    <p class="text-gray-600">Yes — the GIF data gets encoded as-is, animation and all. The resulting
                        Base64 string will be quite large for animated GIFs since they contain multiple frames, but
                        it'll work when embedded in HTML.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Are my images sent to a server?</h3>
                    <p class="text-gray-600">No — everything happens in your browser using the FileReader API. Your
                        images never leave your device. This is important if you're encoding proprietary assets or
                        confidential design files.</p>
                </div>
            </div>
        </article>
    </div>
</div>