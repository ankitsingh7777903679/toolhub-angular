<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="py-12 text-center" style="background-color: #CCFBF1;">
        <div class="w-16 h-16 bg-white/40 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <i class="fa-solid fa-image text-3xl" style="color: #14B8A6;"></i>
        </div>
        <h1 class="text-3xl font-bold text-gray-900 mb-2">PNG to JPG Converter</h1>
        <p class="text-gray-600">Convert your PNG images to JPG format for smaller file size</p>
    </div>

    <div class="container mx-auto px-4 max-w-5xl py-12">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <div class="p-8 md:p-12">
                <div class="border-3 border-dashed border-gray-200 rounded-2xl p-10 text-center transition-all duration-300 hover:border-teal-400 hover:bg-teal-50/50 cursor-pointer"
                    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)" (drop)="onDrop($event)"
                    (click)="fileInput.click()">
                    <input #fileInput type="file" multiple accept="image/png,.png" class="hidden"
                        (change)="onFileSelected($event)">
                    <div class="flex flex-col items-center justify-center space-y-4">
                        <div
                            class="w-20 h-20 bg-teal-100 rounded-full flex items-center justify-center text-teal-500 mb-2">
                            <i class="fa-solid fa-cloud-arrow-up text-3xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Drag & Drop files here</h3>
                        <p class="text-gray-500">or <span class="text-teal-500 font-semibold hover:underline">browse
                                files</span> from your computer</p>
                        <p class="text-xs text-gray-400 mt-2">Supports PNG images</p>
                    </div>
                </div>

                <!-- Action Bar - only show after files selected -->
                @if (files.length > 0) {
                <div
                    class="mt-4 flex flex-col sm:flex-row justify-between items-center gap-4 bg-gray-50 p-4 rounded-xl border border-gray-100">
                    <div class="text-gray-600 font-medium">
                        <span class="text-gray-900 font-bold">{{ files.length }}</span> files selected
                    </div>
                    <div class="flex gap-3">
                        <button (click)="clearAll()"
                            class="px-5 py-2.5 rounded-lg text-red-500 font-medium hover:bg-red-50 transition-colors">Clear
                            All</button>
                        <button (click)="convertAll()" [disabled]="isConverting || allDone"
                            class="px-6 py-2.5 bg-teal-600 text-white rounded-lg font-bold shadow-lg shadow-teal-200 hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all">
                            {{ isConverting ? 'Converting...' : (allDone ? 'Converted!' : 'Convert to JPG') }}
                        </button>
                    </div>
                </div>
                }

                @if (isConverting) {
                <div class="mt-6">
                    <div class="flex justify-between text-sm font-medium text-gray-600 mb-2">
                        <span>Converting...</span><span>{{ progress }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 overflow-hidden">
                        <div class="bg-teal-600 h-2.5 rounded-full transition-all duration-300"
                            [style.width.%]="progress"></div>
                    </div>
                </div>
                }

                @if (allDone) {
                <div class="mt-6 flex flex-col md:flex-row items-center justify-center gap-4">
                    @if (files.length > 1) {
                    <button (click)="downloadAll()"
                        class="flex-1 w-full md:w-auto inline-flex items-center justify-center gap-2 px-8 py-3 bg-green-500 text-white rounded-xl font-bold text-lg shadow-lg shadow-green-200 hover:bg-green-600 transition-all">
                        <i class="fa-solid fa-download"></i> Download All Files
                    </button>
                    }

                    <!-- Send to Tool -->
                    <div class="w-full md:w-auto md:flex-1">
                        <app-send-to-tool [hasOutput]="!!firstConvertedImage" [currentRoute]="currentRoute"
                            [outputData]="firstConvertedImage || ''" [fileName]="firstFileName" [fileType]="'image'">
                        </app-send-to-tool>
                    </div>
                </div>
                }

                @if (files.length > 0) {
                <div class="mt-10 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    @for (file of files; track file.id) {
                    <div
                        class="group relative bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all overflow-hidden">
                        <div class="aspect-square bg-gray-100 relative overflow-hidden">
                            <img [src]="file.convertedUrl || file.previewUrl"
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                alt="preview">
                            @if (file.status === 'converting') {
                            <div class="absolute inset-0 bg-black/50 flex items-center justify-center backdrop-blur-sm">
                                <i class="fa-solid fa-circle-notch fa-spin text-white text-2xl"></i>
                            </div>
                            } @else if (file.status === 'done') {
                            <div
                                class="absolute top-2 right-2 bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center shadow-md">
                                <i class="fa-solid fa-check text-xs"></i>
                            </div>
                            }
                        </div>
                        <div class="p-3">
                            <p class="text-sm font-medium text-gray-700 truncate mb-2" [title]="file.name">{{ file.name
                                }}</p>
                            @if (file.status === 'done') {
                            <button (click)="downloadOne(file)"
                                class="w-full py-1.5 bg-gray-900 text-white text-xs font-bold rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center gap-2">
                                <i class="fa-solid fa-download"></i> Download
                            </button>
                            } @else {
                            <div class="h-7 flex items-center justify-center">
                                <span class="text-xs text-gray-400 font-medium">{{ (file.file.size / 1024).toFixed(1) }}
                                    KB</span>
                            </div>
                            }
                        </div>
                        <button (click)="removeFile(file.id)"
                            class="absolute top-2 left-2 w-8 h-8 bg-white/90 backdrop-blur-sm text-red-500 rounded-full flex items-center justify-center shadow-sm opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 hover:text-white"
                            title="Remove file">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </div>
                    }
                </div>
                }
            </div>
        </div>

        <!-- SEO Content -->
        <article class="prose lg:prose-xl mx-auto mt-16 px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">PNG to JPG Converter — Convert Images for Smaller File
                Sizes</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                PNG files look great, but they're huge. A single screenshot saved as PNG can easily be 5–10 MB, which is
                a problem when you're trying to email it, upload it to a website, or post it somewhere with a file size
                limit. JPG solves that by using lossy compression — it throws away tiny details your eyes won't notice
                anyway, and the result is typically 50–80% smaller.
            </p>
            <p class="text-gray-600 mb-8 leading-relaxed">
                This tool does the conversion right inside your browser. You drop in your PNGs, it spits out JPGs, and
                nothing ever touches a server. That's not a marketing line — it's literally how it works. The Canvas API
                handles the format change locally, so there's zero upload involved. Handy if you're dealing with
                sensitive screenshots or client work you'd rather keep private.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">When Should You Use JPG Over PNG?</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                Here's the thing — PNG isn't always the right choice. It's lossless, which sounds good, but that comes
                at a cost: big files. PNG makes sense for logos, icons, and anything with transparency. But for photos,
                screenshots of webpages, and most real-world images? JPG is almost always the better pick. The file size
                drops dramatically and the quality difference is practically invisible, especially on screens.
            </p>
            <p class="text-gray-600 mb-8 leading-relaxed">
                If you run a blog or website, swapping out heavy PNGs for JPGs can make a noticeable difference in page
                load speed. Google's Core Web Vitals actually factor in image sizes, so it's not just about saving disk
                space — it can genuinely affect your search rankings. Same goes for email: most providers cap
                attachments around 25 MB, and shrinking your images means you can fit more of them in a single message.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">When to Stick With PNG</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                Not every image should become a JPG. If you're working with logos, icons, or UI elements that have
                transparent backgrounds, PNG (or WebP) is the way to go — JPG doesn't support transparency and will
                replace it with a solid white fill. Same for pixel art or graphics with very sharp lines and limited
                colors — PNG preserves those edges perfectly, while JPG compression can introduce visible artifacts
                around them.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">Frequently Asked Questions</h2>
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">How much smaller will my files actually get?</h3>
                    <p class="text-gray-600">It depends on what's in the image. Photos tend to compress really well —
                        you'll often see 70–80% size reduction. Screenshots with lots of text and flat colors compress
                        less aggressively, maybe 40–60%. Either way, the difference is significant enough to matter for
                        uploads and sharing.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Will I notice a quality drop?</h3>
                    <p class="text-gray-600">Honestly, for most images — no. JPG compression is lossy, meaning some
                        pixel data gets discarded, but at high quality settings the difference is almost impossible to
                        spot on screen. Side-by-side, you'd have to zoom in pretty far to notice anything. For print
                        work at 300 DPI, it's still plenty sharp.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Which image types benefit most from this conversion?</h3>
                    <p class="text-gray-600">Photographs and screenshots see the biggest gains — often 70–80% file size
                        reduction with no visible quality loss. Graphics with flat colors, text-heavy images, or
                        anything with sharp edges still shrink, but the savings are more modest (around 30–50%) and you
                        might notice slight softening near edges.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Can I convert a bunch of files at once?</h3>
                    <p class="text-gray-600">Yes — just drag them all into the upload area at once. There's no limit on
                        how many
                        files you can process in one go. They'll all convert at the same time, and you can download them
                        individually or grab all of them at once.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-900 mb-2">Do my images get uploaded anywhere?</h3>
                    <p class="text-gray-600">No — the entire conversion runs in your browser using the HTML5 Canvas API.
                        Your images stay on your machine the whole time and nothing gets sent to any external server.
                        That makes it safe for sensitive or confidential images.</p>
                </div>
            </div>
        </article>
    </div>
</div>