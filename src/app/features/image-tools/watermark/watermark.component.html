<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="py-12 text-center" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
        <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <i class="fa-solid fa-droplet text-3xl text-white"></i>
        </div>
        <h1 class="text-3xl font-bold text-white mb-2">Add Watermark</h1>
        <p class="text-white/80">Add text or image watermark to your pictures</p>
    </div>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">

            <!-- Upload Area -->
            @if (!originalImage) {
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-cyan-500 hover:bg-cyan-50 transition-colors cursor-pointer"
                    (click)="fileInput.click()" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
                    <input #fileInput type="file" accept="image/*" (change)="onFileSelect($event)" class="hidden">
                    <i class="fa-solid fa-cloud-arrow-up text-4xl text-gray-400 mb-3"></i>
                    <p class="text-gray-600 font-medium">Click to upload image</p>
                    <p class="text-gray-400 text-sm mt-1">Supports JPG, PNG, WebP</p>
                </div>
            </div>
            }

            <!-- Editor -->
            @if (originalImage) {
            <div class="grid lg:grid-cols-2 gap-6">

                <!-- Preview -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="font-bold text-gray-800 mb-4">
                        <i class="fa-solid fa-eye text-cyan-500 mr-2"></i>Preview
                    </h3>
                    <div class="bg-gray-100 rounded-lg overflow-hidden"
                        style="background-image: repeating-conic-gradient(#e5e5e5 0% 25%, #fff 0% 50%); background-size: 16px 16px;">
                        <img [src]="resultImage || originalImage" class="w-full h-auto max-h-96 object-contain">
                    </div>
                    <p class="text-xs text-gray-400 mt-2 text-center">{{ originalFileName }}</p>
                </div>

                <!-- Settings -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="font-bold text-gray-800 mb-4">
                        <i class="fa-solid fa-sliders text-cyan-500 mr-2"></i>Watermark Settings
                    </h3>

                    <!-- Type Selector -->
                    <div class="flex gap-2 mb-6">
                        <button (click)="watermarkType = 'text'"
                            [class]="watermarkType === 'text' ? 'flex-1 py-2 px-4 rounded-lg font-medium bg-cyan-500 text-white' : 'flex-1 py-2 px-4 rounded-lg font-medium bg-gray-100 text-gray-600 hover:bg-gray-200'">
                            <i class="fa-solid fa-font mr-2"></i>Text
                        </button>
                        <button (click)="watermarkType = 'image'"
                            [class]="watermarkType === 'image' ? 'flex-1 py-2 px-4 rounded-lg font-medium bg-cyan-500 text-white' : 'flex-1 py-2 px-4 rounded-lg font-medium bg-gray-100 text-gray-600 hover:bg-gray-200'">
                            <i class="fa-solid fa-image mr-2"></i>Image
                        </button>
                    </div>

                    <!-- Text Watermark Options -->
                    @if (watermarkType === 'text') {
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Watermark Text</label>
                            <input type="text" [(ngModel)]="watermarkText"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Color</label>
                                <input type="color" [(ngModel)]="textColor"
                                    class="w-full h-10 rounded-lg border border-gray-300 cursor-pointer">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Font Size</label>
                                <input type="number" [(ngModel)]="fontSize" min="12" max="200"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Opacity: {{ textOpacity
                                }}%</label>
                            <input type="range" [(ngModel)]="textOpacity" min="10" max="100"
                                class="w-full accent-cyan-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Position</label>
                            <select [(ngModel)]="textPosition"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                                <option value="center">Center</option>
                                <option value="top-left">Top Left</option>
                                <option value="top-right">Top Right</option>
                                <option value="bottom-left">Bottom Left</option>
                                <option value="bottom-right">Bottom Right</option>
                                <option value="tile">Tile (Repeat)</option>
                            </select>
                        </div>
                    </div>
                    }

                    <!-- Image Watermark Options -->
                    @if (watermarkType === 'image') {
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Watermark Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-cyan-500 hover:bg-cyan-50 transition-colors"
                                (click)="wmImageInput.click()">
                                <input #wmImageInput type="file" accept="image/*"
                                    (change)="onWatermarkImageSelect($event)" class="hidden">
                                @if (watermarkImage) {
                                <img [src]="watermarkImage" class="w-20 h-20 object-contain mx-auto rounded">
                                } @else {
                                <i class="fa-solid fa-plus text-2xl text-gray-400 mb-2"></i>
                                <p class="text-sm text-gray-500">Click to upload logo/watermark</p>
                                }
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Opacity: {{ imageOpacity
                                }}%</label>
                            <input type="range" [(ngModel)]="imageOpacity" min="10" max="100"
                                class="w-full accent-cyan-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Scale: {{ imageScale }}%</label>
                            <input type="range" [(ngModel)]="imageScale" min="5" max="100"
                                class="w-full accent-cyan-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Position</label>
                            <select [(ngModel)]="imagePosition"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                                <option value="center">Center</option>
                                <option value="top-left">Top Left</option>
                                <option value="top-right">Top Right</option>
                                <option value="bottom-left">Bottom Left</option>
                                <option value="bottom-right">Bottom Right</option>
                                <option value="tile">Tile (Repeat)</option>
                            </select>
                        </div>
                    </div>
                    }

                    <!-- Action Buttons -->
                    <div class="mt-6 space-y-3">
                        <button (click)="applyWatermark()" [disabled]="isProcessing"
                            class="w-full py-3 bg-cyan-500 text-white rounded-lg font-bold hover:bg-cyan-600 transition-colors disabled:opacity-50">
                            @if (isProcessing) {
                            <i class="fa-solid fa-spinner fa-spin mr-2"></i>Applying...
                            } @else {
                            <i class="fa-solid fa-droplet mr-2"></i>Apply Watermark
                            }
                        </button>

                        @if (resultImage) {
                        <div class="flex gap-3">
                            <button (click)="downloadResult()"
                                class="flex-1 py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 transition-colors">
                                <i class="fa-solid fa-download mr-2"></i>Download
                            </button>
                            <app-send-to-tool [hasOutput]="!!resultImage" [currentRoute]="currentRoute"
                                [outputData]="resultImage" [fileName]="getOutputFileName()" [fileType]="'image'">
                            </app-send-to-tool>
                        </div>
                        }

                        <button (click)="reset()" class="w-full py-2 text-gray-500 hover:text-gray-700 font-medium">
                            <i class="fa-solid fa-rotate mr-2"></i>Start Over
                        </button>
                    </div>
                </div>
            </div>
            }

            <!-- SEO Content -->
            <article class="prose lg:prose-xl mx-auto mt-16 px-4 max-w-4xl">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Add Watermark to Images — Brand and Protect Your Work
                </h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    If you've ever shared a photo online and found it reposted without credit — or worse, used by
                    someone else commercially — you know why watermarks exist. They're not glamorous, but they work. A
                    subtle watermark stamps your ownership on an image without ruining it for legitimate viewers, while
                    making it useless for anyone trying to pass it off as their own.
                </p>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    This tool gives you two options: text watermarks (your name, brand, copyright notice, "DRAFT,"
                    whatever you want) or image watermarks (upload your logo as a PNG with a transparent background and
                    it overlays cleanly). You can control the size, opacity, color, position, and angle. If you really
                    want to lock things down, the tile option repeats the watermark diagonally across the entire image
                    so nobody can crop it out.
                </p>

                <h2 class="text-2xl font-bold text-gray-800 mb-4">Finding the Right Opacity</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    This is the part people struggle with most — too visible and it distracts from the image, too subtle
                    and someone can easily edit it out. For client proofs and portfolio sharing, somewhere around 20-40%
                    opacity usually works well. It's visible enough to establish ownership but doesn't destroy the
                    viewing experience. For DRAFT labels on internal documents, go heavier — 50-70% so there's no
                    ambiguity.
                </p>

                <h2 class="text-2xl font-bold text-gray-800 mb-4">Privacy First</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    All watermarking happens in your browser — your images never leave your device. That's important for
                    photographers sharing client proofs or anyone working with images they'd rather not upload to a
                    random server. The processing uses the Canvas API locally, so there's genuinely no server involved.
                </p>

                <h2 class="text-2xl font-bold text-gray-800 mb-4">Frequently Asked Questions</h2>
                <div class="space-y-4">
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-900 mb-2">Can I use my own logo instead of text?</h3>
                        <p class="text-gray-600">Yes — switch to Image mode and upload a PNG. Logos with transparent
                            backgrounds work best since the transparency carries over. You can resize and position it
                            just like text watermarks.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-900 mb-2">How do I stop someone from just cropping the watermark
                            out?</h3>
                        <p class="text-gray-600">Enable the tile option. It repeats the watermark in a diagonal grid
                            across the entire image, so there's no clean area left to crop. Combined with medium
                            opacity, it makes removal impractical without obviously damaging the image.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-900 mb-2">What opacity setting looks professional without being
                            obnoxious?</h3>
                        <p class="text-gray-600">For portfolio/client proofs, 20-40% is the sweet spot — visible but not
                            distracting. For "DRAFT" stamps on internal docs, go 50% or higher so there's no confusion.
                            Experiment with the slider until it feels right for your use case.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-900 mb-2">Does adding a watermark hurt image quality?</h3>
                        <p class="text-gray-600">No — the watermark gets composited on top of the image at its full
                            original resolution. The output file is the same dimensions and quality as your source. The
                            watermark is an overlay, not a destructive edit.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                        <h3 class="font-bold text-gray-900 mb-2">Are my images uploaded anywhere?</h3>
                        <p class="text-gray-600">No. Everything happens in your browser. Your photos stay on your device
                            and nothing is transmitted to any server at any point.</p>
                    </div>
                </div>
            </article>

        </div>
    </div>
</div>